{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SreejaSangras/TMFG/src/app/admin/services/new/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport Link from 'next/link'\r\nimport Image from 'next/image'\r\n\r\nexport default function NewServicePage() {\r\n  const router = useRouter()\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [isUploading, setIsUploading] = useState(false)\r\n  const [imagePreview, setImagePreview] = useState<string | null>(null)\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    slug: '',\r\n    description: '',\r\n    category: '',\r\n    duration: '',\r\n    price: '',\r\n    maxAttendees: '',\r\n    image: '',\r\n    active: true\r\n  })\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\r\n    const { name, value, type } = e.target\r\n\r\n    // Auto-generate slug from title\r\n    if (name === 'title') {\r\n      const slug = value\r\n        .toLowerCase()\r\n        .replace(/[^a-z0-9]+/g, '-')\r\n        .replace(/(^-|-$)/g, '')\r\n      setFormData(prev => ({ ...prev, title: value, slug }))\r\n    } else if (type === 'checkbox') {\r\n      const checked = (e.target as HTMLInputElement).checked\r\n      setFormData(prev => ({ ...prev, [name]: checked }))\r\n    } else {\r\n      setFormData(prev => ({ ...prev, [name]: value }))\r\n    }\r\n  }\r\n\r\n  const handleImageUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0]\r\n    if (!file) return\r\n\r\n    // Validate file type\r\n    if (!file.type.startsWith('image/')) {\r\n      alert('Please select an image file')\r\n      return\r\n    }\r\n\r\n    // Validate file size (max 5MB)\r\n    if (file.size > 5 * 1024 * 1024) {\r\n      alert('File size must be less than 5MB')\r\n      return\r\n    }\r\n\r\n    setIsUploading(true)\r\n\r\n    try {\r\n      const formData = new FormData()\r\n      formData.append('file', file)\r\n      formData.append('type', 'service')\r\n\r\n      const response = await fetch('/api/admin/upload', {\r\n        method: 'POST',\r\n        body: formData\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || 'Upload failed')\r\n      }\r\n\r\n      const data = await response.json()\r\n\r\n      setFormData(prev => ({ ...prev, image: data.path }))\r\n      setImagePreview(data.path)\r\n      alert('Image uploaded successfully!')\r\n    } catch (error) {\r\n      console.error('Upload error:', error)\r\n      alert(error instanceof Error ? error.message : 'Failed to upload image')\r\n    } finally {\r\n      setIsUploading(false)\r\n    }\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setIsLoading(true)\r\n\r\n    try {\r\n      const response = await fetch('/api/admin/services', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          ...formData,\r\n          price: formData.price ? parseFloat(formData.price) : null,\r\n          maxAttendees: formData.maxAttendees ? parseInt(formData.maxAttendees) : null\r\n        })\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json()\r\n        throw new Error(error.error || 'Failed to create service')\r\n      }\r\n\r\n      alert('Service created successfully!')\r\n      router.push('/admin/services')\r\n    } catch (error) {\r\n      console.error('Create error:', error)\r\n      alert(error instanceof Error ? error.message : 'Failed to create service')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <div className=\"mb-8\">\r\n        <Link\r\n          href=\"/admin/services\"\r\n          className=\"text-primary hover:underline mb-4 inline-block\"\r\n        >\r\n          ‚Üê Back to Services\r\n        </Link>\r\n        <h1 className=\"text-3xl font-bold text-gray-900\">Create New Service</h1>\r\n        <p className=\"text-gray-600 mt-2\">Add a new workshop or service offering</p>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} className=\"bg-white rounded-lg shadow p-8 space-y-6\">\r\n        {/* Title */}\r\n        <div>\r\n          <label htmlFor=\"title\" className=\"block text-sm font-semibold mb-2\">\r\n            Title <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"title\"\r\n            name=\"title\"\r\n            value={formData.title}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary\"\r\n            placeholder=\"e.g., Organic Gardening Basics\"\r\n          />\r\n        </div>\r\n\r\n        {/* Slug */}\r\n        <div>\r\n          <label htmlFor=\"slug\" className=\"block text-sm font-semibold mb-2\">\r\n            URL Slug <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"slug\"\r\n            name=\"slug\"\r\n            value={formData.slug}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary\"\r\n            placeholder=\"e.g., organic-gardening-basics\"\r\n          />\r\n          <p className=\"text-sm text-gray-500 mt-1\">\r\n            Auto-generated from title. Used in URL.\r\n          </p>\r\n        </div>\r\n\r\n        {/* Category */}\r\n        <div>\r\n          <label htmlFor=\"category\" className=\"block text-sm font-semibold mb-2\">\r\n            Category <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <select\r\n            id=\"category\"\r\n            name=\"category\"\r\n            value={formData.category}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary\"\r\n          >\r\n            <option value=\"\">Select category</option>\r\n            <option value=\"Beginner Workshop\">Beginner Workshop</option>\r\n            <option value=\"Advanced Workshop\">Advanced Workshop</option>\r\n            <option value=\"Community Event\">Community Event</option>\r\n            <option value=\"Kids Program\">Kids Program</option>\r\n            <option value=\"Seasonal Workshop\">Seasonal Workshop</option>\r\n            <option value=\"Special Event\">Special Event</option>\r\n          </select>\r\n        </div>\r\n\r\n        {/* Description */}\r\n        <div>\r\n          <label htmlFor=\"description\" className=\"block text-sm font-semibold mb-2\">\r\n            Description <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <textarea\r\n            id=\"description\"\r\n            name=\"description\"\r\n            value={formData.description}\r\n            onChange={handleChange}\r\n            required\r\n            rows={6}\r\n            className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary\"\r\n            placeholder=\"Detailed description of the service...\"\r\n          />\r\n        </div>\r\n\r\n        {/* Duration */}\r\n        <div>\r\n          <label htmlFor=\"duration\" className=\"block text-sm font-semibold mb-2\">\r\n            Duration\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"duration\"\r\n            name=\"duration\"\r\n            value={formData.duration}\r\n            onChange={handleChange}\r\n            className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary\"\r\n            placeholder=\"e.g., 2 hours, Half day, Full day\"\r\n          />\r\n        </div>\r\n\r\n        {/* Price and Max Attendees */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <div>\r\n            <label htmlFor=\"price\" className=\"block text-sm font-semibold mb-2\">\r\n              Price (USD)\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"price\"\r\n              name=\"price\"\r\n              value={formData.price}\r\n              onChange={handleChange}\r\n              step=\"0.01\"\r\n              min=\"0\"\r\n              className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary\"\r\n              placeholder=\"0.00 for free\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label htmlFor=\"maxAttendees\" className=\"block text-sm font-semibold mb-2\">\r\n              Max Attendees\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"maxAttendees\"\r\n              name=\"maxAttendees\"\r\n              value={formData.maxAttendees}\r\n              onChange={handleChange}\r\n              min=\"1\"\r\n              className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary\"\r\n              placeholder=\"Leave empty for unlimited\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Image Upload */}\r\n        <div>\r\n          <label htmlFor=\"image\" className=\"block text-sm font-semibold mb-2\">\r\n            Featured Image\r\n          </label>\r\n          <input\r\n            type=\"file\"\r\n            id=\"image\"\r\n            accept=\"image/*\"\r\n            onChange={handleImageUpload}\r\n            disabled={isUploading}\r\n            className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary\"\r\n          />\r\n          {isUploading && (\r\n            <p className=\"text-sm text-gray-600 mt-2\">Uploading image...</p>\r\n          )}\r\n          {imagePreview && (\r\n            <div className=\"mt-4\">\r\n              <p className=\"text-sm font-semibold mb-2\">Preview:</p>\r\n              <div className=\"relative w-full h-64 rounded-lg overflow-hidden\">\r\n                <Image\r\n                  src={imagePreview}\r\n                  alt=\"Preview\"\r\n                  fill\r\n                  className=\"object-cover\"\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Active Status */}\r\n        <div className=\"flex items-center gap-3\">\r\n          <input\r\n            type=\"checkbox\"\r\n            id=\"active\"\r\n            name=\"active\"\r\n            checked={formData.active}\r\n            onChange={handleChange}\r\n            className=\"w-5 h-5 text-primary focus:ring-2 focus:ring-primary\"\r\n          />\r\n          <label htmlFor=\"active\" className=\"text-sm font-semibold\">\r\n            Active (visible on website)\r\n          </label>\r\n        </div>\r\n\r\n        {/* Submit Buttons */}\r\n        <div className=\"flex gap-4 pt-6 border-t\">\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isLoading || isUploading}\r\n            className=\"bg-primary text-white px-8 py-3 rounded-lg font-semibold hover:bg-opacity-90 transition-colors disabled:opacity-50\"\r\n          >\r\n            {isLoading ? 'Creating...' : 'Create Service'}\r\n          </button>\r\n          <Link\r\n            href=\"/admin/services\"\r\n            className=\"bg-gray-200 text-gray-700 px-8 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-colors\"\r\n          >\r\n            Cancel\r\n          </Link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}