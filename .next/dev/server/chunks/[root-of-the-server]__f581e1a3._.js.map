{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SreejaSangras/TMFG/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n  prisma: PrismaClient | undefined\r\n}\r\n\r\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient()\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,6IAAY;AAEhE,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SreejaSangras/TMFG/src/lib/notifications.ts"],"sourcesContent":["import sgMail from '@sendgrid/mail'\r\nimport twilio from 'twilio'\r\n\r\n// Initialize SendGrid\r\nif (process.env.SENDGRID_API_KEY) {\r\n  sgMail.setApiKey(process.env.SENDGRID_API_KEY)\r\n}\r\n\r\n// Initialize Twilio\r\nconst twilioClient = process.env.TWILIO_ACCOUNT_SID && process.env.TWILIO_AUTH_TOKEN\r\n  ? twilio(process.env.TWILIO_ACCOUNT_SID, process.env.TWILIO_AUTH_TOKEN)\r\n  : null\r\n\r\ninterface EmailOptions {\r\n  to: string\r\n  subject: string\r\n  text: string\r\n  html?: string\r\n}\r\n\r\nexport async function sendEmail({ to, subject, text, html }: EmailOptions) {\r\n  if (!process.env.SENDGRID_API_KEY || !process.env.SENDGRID_FROM_EMAIL) {\r\n    console.error('SendGrid credentials not configured')\r\n    return { success: false, error: 'Email service not configured' }\r\n  }\r\n\r\n  try {\r\n    await sgMail.send({\r\n      to,\r\n      from: process.env.SENDGRID_FROM_EMAIL,\r\n      subject,\r\n      text,\r\n      html: html || text,\r\n    })\r\n    return { success: true }\r\n  } catch (error) {\r\n    console.error('Error sending email:', error)\r\n    return { success: false, error }\r\n  }\r\n}\r\n\r\ninterface SMSOptions {\r\n  to: string\r\n  message: string\r\n}\r\n\r\nexport async function sendSMS({ to, message }: SMSOptions) {\r\n  if (!twilioClient || !process.env.TWILIO_PHONE_NUMBER) {\r\n    console.error('Twilio credentials not configured')\r\n    return { success: false, error: 'SMS service not configured' }\r\n  }\r\n\r\n  try {\r\n    await twilioClient.messages.create({\r\n      body: message,\r\n      from: process.env.TWILIO_PHONE_NUMBER,\r\n      to,\r\n    })\r\n    return { success: true }\r\n  } catch (error) {\r\n    console.error('Error sending SMS:', error)\r\n    return { success: false, error }\r\n  }\r\n}\r\n\r\n// Template functions\r\nexport function getVolunteerWelcomeEmail(name: string) {\r\n  return {\r\n    subject: 'Welcome to The Morning Family Garden!',\r\n    text: `Hi ${name},\\n\\nThank you for signing up to volunteer with The Morning Family Garden! We're excited to have you join our community.\\n\\nWe'll be in touch soon with more information about upcoming volunteer opportunities.\\n\\nBest regards,\\nThe Morning Family Garden Team`,\r\n    html: `\r\n      <h2>Welcome to The Morning Family Garden!</h2>\r\n      <p>Hi ${name},</p>\r\n      <p>Thank you for signing up to volunteer with The Morning Family Garden! We're excited to have you join our community.</p>\r\n      <p>We'll be in touch soon with more information about upcoming volunteer opportunities.</p>\r\n      <p>Best regards,<br>The Morning Family Garden Team</p>\r\n    `,\r\n  }\r\n}\r\n\r\nexport function getWorkshopRegistrationEmail(name: string, serviceName: string, date?: string) {\r\n  const dateInfo = date ? ` scheduled for ${date}` : ''\r\n  return {\r\n    subject: `Workshop Registration Confirmed: ${serviceName}`,\r\n    text: `Hi ${name},\\n\\nYour registration for \"${serviceName}\"${dateInfo} has been confirmed!\\n\\nWe look forward to seeing you.\\n\\nBest regards,\\nThe Morning Family Garden Team`,\r\n    html: `\r\n      <h2>Workshop Registration Confirmed</h2>\r\n      <p>Hi ${name},</p>\r\n      <p>Your registration for <strong>\"${serviceName}\"</strong>${dateInfo} has been confirmed!</p>\r\n      <p>We look forward to seeing you.</p>\r\n      <p>Best regards,<br>The Morning Family Garden Team</p>\r\n    `,\r\n  }\r\n}\r\n\r\nexport function getDonationThankYouEmail(name: string, amount: number) {\r\n  return {\r\n    subject: 'Thank You for Your Donation!',\r\n    text: `Hi ${name},\\n\\nThank you for your generous donation of $${amount.toFixed(2)} to The Morning Family Garden!\\n\\nYour support helps us maintain our community gardens, provide free workshops, and promote sustainable agriculture in our neighborhood.\\n\\nBest regards,\\nThe Morning Family Garden Team`,\r\n    html: `\r\n      <h2>Thank You for Your Donation!</h2>\r\n      <p>Hi ${name},</p>\r\n      <p>Thank you for your generous donation of <strong>$${amount.toFixed(2)}</strong> to The Morning Family Garden!</p>\r\n      <p>Your support helps us maintain our community gardens, provide free workshops, and promote sustainable agriculture in our neighborhood.</p>\r\n      <p>Best regards,<br>The Morning Family Garden Team</p>\r\n    `,\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;;;;;;;AAGA,sBAAsB;AACtB,IAAI,QAAQ,GAAG,CAAC,gBAAgB,EAAE;IAChC,gKAAM,CAAC,SAAS,CAAC,QAAQ,GAAG,CAAC,gBAAgB;AAC/C;AAEA,oBAAoB;AACpB,MAAM,eAAe,QAAQ,GAAG,CAAC,kBAAkB,IAAI,QAAQ,GAAG,CAAC,iBAAiB,GAChF,OAAO,QAAQ,GAAG,CAAC,kBAAkB,EAAE,QAAQ,GAAG,CAAC,iBAAiB,IACpE;AASG,eAAe,UAAU,EAAE,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAgB;IACvE,IAAI,CAAC,QAAQ,GAAG,CAAC,gBAAgB,IAAI,CAAC,QAAQ,GAAG,CAAC,mBAAmB,EAAE;QACrE,QAAQ,KAAK,CAAC;QACd,OAAO;YAAE,SAAS;YAAO,OAAO;QAA+B;IACjE;IAEA,IAAI;QACF,MAAM,gKAAM,CAAC,IAAI,CAAC;YAChB;YACA,MAAM,QAAQ,GAAG,CAAC,mBAAmB;YACrC;YACA;YACA,MAAM,QAAQ;QAChB;QACA,OAAO;YAAE,SAAS;QAAK;IACzB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO;YAAE,SAAS;YAAO;QAAM;IACjC;AACF;AAOO,eAAe,QAAQ,EAAE,EAAE,EAAE,OAAO,EAAc;IACvD,IAAI,CAAC,gBAAgB,CAAC,QAAQ,GAAG,CAAC,mBAAmB,EAAE;QACrD,QAAQ,KAAK,CAAC;QACd,OAAO;YAAE,SAAS;YAAO,OAAO;QAA6B;IAC/D;IAEA,IAAI;QACF,MAAM,aAAa,QAAQ,CAAC,MAAM,CAAC;YACjC,MAAM;YACN,MAAM,QAAQ,GAAG,CAAC,mBAAmB;YACrC;QACF;QACA,OAAO;YAAE,SAAS;QAAK;IACzB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QACpC,OAAO;YAAE,SAAS;YAAO;QAAM;IACjC;AACF;AAGO,SAAS,yBAAyB,IAAY;IACnD,OAAO;QACL,SAAS;QACT,MAAM,CAAC,GAAG,EAAE,KAAK,iQAAiQ,CAAC;QACnR,MAAM,CAAC;;YAEC,EAAE,KAAK;;;;IAIf,CAAC;IACH;AACF;AAEO,SAAS,6BAA6B,IAAY,EAAE,WAAmB,EAAE,IAAa;IAC3F,MAAM,WAAW,OAAO,CAAC,eAAe,EAAE,MAAM,GAAG;IACnD,OAAO;QACL,SAAS,CAAC,iCAAiC,EAAE,aAAa;QAC1D,MAAM,CAAC,GAAG,EAAE,KAAK,4BAA4B,EAAE,YAAY,CAAC,EAAE,SAAS,uGAAuG,CAAC;QAC/K,MAAM,CAAC;;YAEC,EAAE,KAAK;wCACqB,EAAE,YAAY,UAAU,EAAE,SAAS;;;IAGvE,CAAC;IACH;AACF;AAEO,SAAS,yBAAyB,IAAY,EAAE,MAAc;IACnE,OAAO;QACL,SAAS;QACT,MAAM,CAAC,GAAG,EAAE,KAAK,8CAA8C,EAAE,OAAO,OAAO,CAAC,GAAG,yNAAyN,CAAC;QAC7S,MAAM,CAAC;;YAEC,EAAE,KAAK;0DACuC,EAAE,OAAO,OAAO,CAAC,GAAG;;;IAG1E,CAAC;IACH;AACF","debugId":null}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SreejaSangras/TMFG/src/app/api/volunteers/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\r\nimport { prisma } from '@/lib/prisma'\r\nimport { sendEmail, getVolunteerWelcomeEmail } from '@/lib/notifications'\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const body = await request.json()\r\n    const { name, email, phone, availability, interests, experience, message } = body\r\n\r\n    // Validate required fields\r\n    if (!name || !email || !availability) {\r\n      return NextResponse.json(\r\n        { error: 'Missing required fields' },\r\n        { status: 400 }\r\n      )\r\n    }\r\n\r\n    // Create volunteer record\r\n    const volunteer = await prisma.volunteer.create({\r\n      data: {\r\n        name,\r\n        email,\r\n        phone: phone || null,\r\n        availability,\r\n        interests: interests || [],\r\n        experience: experience || null,\r\n        message: message || null,\r\n        status: 'pending',\r\n      },\r\n    })\r\n\r\n    // Send welcome email\r\n    const emailContent = getVolunteerWelcomeEmail(name)\r\n    await sendEmail({\r\n      to: email,\r\n      subject: emailContent.subject,\r\n      text: emailContent.text,\r\n      html: emailContent.html,\r\n    })\r\n\r\n    // Notify admin\r\n    if (process.env.ADMIN_EMAIL) {\r\n      await sendEmail({\r\n        to: process.env.ADMIN_EMAIL,\r\n        subject: 'New Volunteer Registration',\r\n        text: `New volunteer registered:\\n\\nName: ${name}\\nEmail: ${email}\\nPhone: ${phone || 'N/A'}\\nAvailability: ${availability}\\nInterests: ${interests.join(', ')}\\nExperience: ${experience || 'N/A'}\\nMessage: ${message || 'N/A'}`,\r\n        html: `\r\n          <h2>New Volunteer Registration</h2>\r\n          <p><strong>Name:</strong> ${name}</p>\r\n          <p><strong>Email:</strong> ${email}</p>\r\n          <p><strong>Phone:</strong> ${phone || 'N/A'}</p>\r\n          <p><strong>Availability:</strong> ${availability}</p>\r\n          <p><strong>Interests:</strong> ${interests.join(', ')}</p>\r\n          <p><strong>Experience:</strong> ${experience || 'N/A'}</p>\r\n          <p><strong>Message:</strong> ${message || 'N/A'}</p>\r\n        `,\r\n      })\r\n    }\r\n\r\n    return NextResponse.json(\r\n      { message: 'Volunteer registration successful', volunteer },\r\n      { status: 201 }\r\n    )\r\n  } catch (error) {\r\n    console.error('Volunteer registration error:', error)\r\n    return NextResponse.json(\r\n      { error: 'Failed to register volunteer' },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const { searchParams } = new URL(request.url)\r\n    const status = searchParams.get('status')\r\n    const id = searchParams.get('id')\r\n\r\n    // If ID is provided, return single volunteer\r\n    if (id) {\r\n      const volunteer = await prisma.volunteer.findUnique({\r\n        where: { id },\r\n      })\r\n\r\n      if (!volunteer) {\r\n        return NextResponse.json(\r\n          { error: 'Volunteer not found' },\r\n          { status: 404 }\r\n        )\r\n      }\r\n\r\n      return NextResponse.json(volunteer, { status: 200 })\r\n    }\r\n\r\n    // Otherwise return list with optional status filter\r\n    const volunteers = await prisma.volunteer.findMany({\r\n      where: status ? { status } : undefined,\r\n      orderBy: { createdAt: 'desc' },\r\n    })\r\n\r\n    return NextResponse.json({ volunteers }, { status: 200 })\r\n  } catch (error) {\r\n    console.error('Error fetching volunteers:', error)\r\n    return NextResponse.json(\r\n      { error: 'Failed to fetch volunteers' },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}