module.exports=[93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},24361,(e,t,r)=>{t.exports=e.x("util",()=>require("util"))},54799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},27699,(e,t,r)=>{t.exports=e.x("events",()=>require("events"))},21517,(e,t,r)=>{t.exports=e.x("http",()=>require("http"))},24836,(e,t,r)=>{t.exports=e.x("https",()=>require("https"))},33405,(e,t,r)=>{t.exports=e.x("child_process",()=>require("child_process"))},12841,(e,t,r)=>{"use strict";t.exports=TypeError},26167,(e,t,r)=>{"use strict";t.exports=Object},78075,(e,t,r)=>{"use strict";t.exports=Error},23767,(e,t,r)=>{"use strict";t.exports=EvalError},97799,(e,t,r)=>{"use strict";t.exports=RangeError},49670,(e,t,r)=>{"use strict";t.exports=ReferenceError},70365,(e,t,r)=>{"use strict";t.exports=SyntaxError},90665,(e,t,r)=>{"use strict";t.exports=URIError},85415,(e,t,r)=>{"use strict";t.exports=Math.abs},71016,(e,t,r)=>{"use strict";t.exports=Math.floor},74729,(e,t,r)=>{"use strict";t.exports=Math.max},32294,(e,t,r)=>{"use strict";t.exports=Math.min},93729,(e,t,r)=>{"use strict";t.exports=Math.pow},84640,(e,t,r)=>{"use strict";t.exports=Math.round},24798,(e,t,r)=>{"use strict";t.exports=Number.isNaN||function(e){return e!=e}},39591,(e,t,r)=>{"use strict";var o=e.r(24798);t.exports=function(e){return o(e)||0===e?e:e<0?-1:1}},52709,(e,t,r)=>{"use strict";t.exports=Object.getOwnPropertyDescriptor},5900,(e,t,r)=>{"use strict";var o=e.r(52709);if(o)try{o([],"length")}catch(e){o=null}t.exports=o},13664,(e,t,r)=>{"use strict";var o=Object.defineProperty||!1;if(o)try{o({},"a",{value:1})}catch(e){o=!1}t.exports=o},82419,(e,t,r)=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var o in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0}},42275,(e,t,r)=>{"use strict";var o="undefined"!=typeof Symbol&&Symbol,n=e.r(82419);t.exports=function(){return"function"==typeof o&&"function"==typeof Symbol&&"symbol"==typeof o("foo")&&"symbol"==typeof Symbol("bar")&&n()}},1655,(e,t,r)=>{"use strict";t.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},37057,(e,t,r)=>{"use strict";t.exports=e.r(26167).getPrototypeOf||null},29605,(e,t,r)=>{"use strict";var o=Object.prototype.toString,n=Math.max,a=function(e,t){for(var r=[],o=0;o<e.length;o+=1)r[o]=e[o];for(var n=0;n<t.length;n+=1)r[n+e.length]=t[n];return r},i=function(e,t){for(var r=[],o=t||0,n=0;o<e.length;o+=1,n+=1)r[n]=e[o];return r},p=function(e,t){for(var r="",o=0;o<e.length;o+=1)r+=e[o],o+1<e.length&&(r+=t);return r};t.exports=function(e){var t,r=this;if("function"!=typeof r||"[object Function]"!==o.apply(r))throw TypeError("Function.prototype.bind called on incompatible "+r);for(var s=i(arguments,1),y=n(0,r.length-s.length),u=[],c=0;c<y;c++)u[c]="$"+c;if(t=Function("binder","return function ("+p(u,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof t){var o=r.apply(this,a(s,arguments));return Object(o)===o?o:this}return r.apply(e,a(s,arguments))}),r.prototype){var l=function(){};l.prototype=r.prototype,t.prototype=new l,l.prototype=null}return t}},68278,(e,t,r)=>{"use strict";var o=e.r(29605);t.exports=Function.prototype.bind||o},96410,(e,t,r)=>{"use strict";t.exports=Function.prototype.call},37999,(e,t,r)=>{"use strict";t.exports=Function.prototype.apply},21246,(e,t,r)=>{"use strict";t.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},58420,(e,t,r)=>{"use strict";var o=e.r(68278),n=e.r(37999),a=e.r(96410);t.exports=e.r(21246)||o.call(a,n)},66227,(e,t,r)=>{"use strict";var o=e.r(68278),n=e.r(12841),a=e.r(96410),i=e.r(58420);t.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new n("a function is required");return i(o,a,e)}},8650,(e,t,r)=>{"use strict";var o,n=e.r(66227),a=e.r(5900);try{o=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var i=!!o&&a&&a(Object.prototype,"__proto__"),p=Object,s=p.getPrototypeOf;t.exports=i&&"function"==typeof i.get?n([i.get]):"function"==typeof s&&function(e){return s(null==e?e:p(e))}},50566,(e,t,r)=>{"use strict";var o=e.r(1655),n=e.r(37057),a=e.r(8650);t.exports=o?function(e){return o(e)}:n?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw TypeError("getProto: not an object");return n(e)}:a?function(e){return a(e)}:null},50916,(e,t,r)=>{"use strict";var o=Function.prototype.call,n=Object.prototype.hasOwnProperty;t.exports=e.r(68278).call(o,n)},35169,(e,t,r)=>{"use strict";var o=e.r(26167),n=e.r(78075),a=e.r(23767),i=e.r(97799),p=e.r(49670),s=e.r(70365),y=e.r(12841),u=e.r(90665),c=e.r(85415),l=e.r(71016),d=e.r(74729),f=e.r(32294),h=e.r(93729),v=e.r(84640),g=e.r(39591),A=Function,m=function(e){try{return A('"use strict"; return ('+e+").constructor;")()}catch(e){}},x=e.r(5900),b=e.r(13664),P=function(){throw new y},R=x?function(){try{return arguments.callee,P}catch(e){try{return x(arguments,"callee").get}catch(e){return P}}}():P,E=e.r(42275)(),w=e.r(50566),S=e.r(37057),O=e.r(1655),_=e.r(37999),I=e.r(96410),j={},F="undefined"!=typeof Uint8Array&&w?w(Uint8Array):void 0,U={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":E&&w?w([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":j,"%AsyncGenerator%":j,"%AsyncGeneratorFunction%":j,"%AsyncIteratorPrototype%":j,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?void 0:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?void 0:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":a,"%Float16Array%":"undefined"==typeof Float16Array?void 0:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":A,"%GeneratorFunction%":j,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":E&&w?w(w([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&E&&w?w(new Map()[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":o,"%Object.getOwnPropertyDescriptor%":x,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":i,"%ReferenceError%":p,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&E&&w?w(new Set()[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":E&&w?w(""[Symbol.iterator]()):void 0,"%Symbol%":E?Symbol:void 0,"%SyntaxError%":s,"%ThrowTypeError%":R,"%TypedArray%":F,"%TypeError%":y,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%Function.prototype.call%":I,"%Function.prototype.apply%":_,"%Object.defineProperty%":b,"%Object.getPrototypeOf%":S,"%Math.abs%":c,"%Math.floor%":l,"%Math.max%":d,"%Math.min%":f,"%Math.pow%":h,"%Math.round%":v,"%Math.sign%":g,"%Reflect.getPrototypeOf%":O};if(w)try{null.error}catch(e){var N=w(w(e));U["%Error.prototype%"]=N}var M=function e(t){var r;if("%AsyncFunction%"===t)r=m("async function () {}");else if("%GeneratorFunction%"===t)r=m("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=m("async function* () {}");else if("%AsyncGenerator%"===t){var o=e("%AsyncGeneratorFunction%");o&&(r=o.prototype)}else if("%AsyncIteratorPrototype%"===t){var n=e("%AsyncGenerator%");n&&w&&(r=w(n.prototype))}return U[t]=r,r},C={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},T=e.r(68278),k=e.r(50916),q=T.call(I,Array.prototype.concat),D=T.call(_,Array.prototype.splice),B=T.call(I,String.prototype.replace),G=T.call(I,String.prototype.slice),H=T.call(I,RegExp.prototype.exec),W=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$=/\\(\\)?/g,K=function(e){var t=G(e,0,1),r=G(e,-1);if("%"===t&&"%"!==r)throw new s("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new s("invalid intrinsic syntax, expected opening `%`");var o=[];return B(e,W,function(e,t,r,n){o[o.length]=r?B(n,$,"$1"):t||e}),o},V=function(e,t){var r,o=e;if(k(C,o)&&(o="%"+(r=C[o])[0]+"%"),k(U,o)){var n=U[o];if(n===j&&(n=M(o)),void 0===n&&!t)throw new y("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:o,value:n}}throw new s("intrinsic "+e+" does not exist!")};t.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new y("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new y('"allowMissing" argument must be a boolean');if(null===H(/^%?[^%]*%?$/,e))throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=K(e),o=r.length>0?r[0]:"",n=V("%"+o+"%",t),a=n.name,i=n.value,p=!1,u=n.alias;u&&(o=u[0],D(r,q([0,1],u)));for(var c=1,l=!0;c<r.length;c+=1){var d=r[c],f=G(d,0,1),h=G(d,-1);if(('"'===f||"'"===f||"`"===f||'"'===h||"'"===h||"`"===h)&&f!==h)throw new s("property names with quotes must have matching quotes");if("constructor"!==d&&l||(p=!0),o+="."+d,k(U,a="%"+o+"%"))i=U[a];else if(null!=i){if(!(d in i)){if(!t)throw new y("base intrinsic for "+e+" exists, but the property is not available.");return}if(x&&c+1>=r.length){var v=x(i,d);i=(l=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:i[d]}else l=k(i,d),i=i[d];l&&!p&&(U[a]=i)}}return i}},5501,e=>{"use strict";var t=e.i(9856),r=e.i(4298),o=e.i(66252),n=e.i(82116),a=e.i(92397),i=e.i(83134),p=e.i(85472),s=e.i(97106),y=e.i(8459),u=e.i(25846),c=e.i(89678),l=e.i(45397),d=e.i(31928),f=e.i(85116),h=e.i(65686),v=e.i(70656),g=e.i(93695);e.i(42613);var A=e.i(91967),m=e.i(63629),x=e.i(99838);async function b(e){try{let{amount:t,donorName:r,donorEmail:o,message:n}=await e.json();if(!t||t<1)return m.NextResponse.json({error:"Invalid donation amount"},{status:400});if(!o)return m.NextResponse.json({error:"Email is required"},{status:400});let a=await x.stripe.checkout.sessions.create({payment_method_types:["card"],line_items:[{price_data:{currency:"usd",product_data:{name:"Donation to The Morning Family Garden",description:n||"Support our community garden initiatives"},unit_amount:Math.round(100*t)},quantity:1}],mode:"payment",success_url:`${process.env.NEXTAUTH_URL||"http://localhost:3000"}/donate/success?session_id={CHECKOUT_SESSION_ID}`,cancel_url:`${process.env.NEXTAUTH_URL||"http://localhost:3000"}/donate?canceled=true`,customer_email:o,metadata:{donorName:r||"Anonymous",donorEmail:o,message:n||""}});return m.NextResponse.json({sessionId:a.id,url:a.url},{status:200})}catch(e){return console.error("Stripe session creation error:",e),m.NextResponse.json({error:e.message||"Failed to create payment session"},{status:500})}}e.s(["POST",()=>b],24488);var P=e.i(24488);let R=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/donations/create-payment-intent/route",pathname:"/api/donations/create-payment-intent",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/TMFG/src/app/api/donations/create-payment-intent/route.ts",nextConfigOutput:"",userland:P}),{workAsyncStorage:E,workUnitAsyncStorage:w,serverHooks:S}=R;function O(){return(0,o.patchFetch)({workAsyncStorage:E,workUnitAsyncStorage:w})}async function _(e,t,o){R.isDev&&(0,n.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let m="/api/donations/create-payment-intent/route";m=m.replace(/\/index$/,"")||"/";let x=await R.prepare(e,t,{srcPage:m,multiZoneDraftMode:!1});if(!x)return t.statusCode=400,t.end("Bad Request"),null==o.waitUntil||o.waitUntil.call(o,Promise.resolve()),null;let{buildId:b,params:P,nextConfig:E,parsedUrl:w,isDraftMode:S,prerenderManifest:O,routerServerContext:_,isOnDemandRevalidate:I,revalidateOnlyGenerated:j,resolvedPathname:F,clientReferenceManifest:U,serverActionsManifest:N}=x,M=(0,s.normalizeAppPath)(m),C=!!(O.dynamicRoutes[M]||O.routes[F]),T=async()=>((null==_?void 0:_.render404)?await _.render404(e,t,w,!1):t.end("This page could not be found"),null);if(C&&!S){let e=!!O.routes[F],t=O.dynamicRoutes[M];if(t&&!1===t.fallback&&!e){if(E.experimental.adapterPath)return await T();throw new g.NoFallbackError}}let k=null;!C||R.isDev||S||(k="/index"===(k=F)?"/":k);let q=!0===R.isDev||!C,D=C&&!q;N&&U&&(0,i.setReferenceManifestsSingleton)({page:m,clientReferenceManifest:U,serverActionsManifest:N,serverModuleMap:(0,p.createServerModuleMap)({serverActionsManifest:N})});let B=e.method||"GET",G=(0,a.getTracer)(),H=G.getActiveScopeSpan(),W={params:P,prerenderManifest:O,renderOpts:{experimental:{authInterrupts:!!E.experimental.authInterrupts},cacheComponents:!!E.cacheComponents,supportsDynamicResponse:q,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:E.cacheLife,waitUntil:o.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,o)=>R.onRequestError(e,t,o,_)},sharedContext:{buildId:b}},$=new y.NodeNextRequest(e),K=new y.NodeNextResponse(t),V=u.NextRequestAdapter.fromNodeNextRequest($,(0,u.signalFromNodeResponse)(t));try{let i=async e=>R.handle(V,W).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=G.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==c.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=r.get("next.route");if(o){let t=`${B} ${o}`;e.setAttributes({"next.route":o,"http.route":o,"next.span_name":t}),e.updateName(t)}else e.updateName(`${B} ${m}`)}),p=!!(0,n.getRequestMeta)(e,"minimalMode"),s=async n=>{var a,s;let y=async({previousCacheEntry:r})=>{try{if(!p&&I&&j&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let a=await i(n);e.fetchMetrics=W.renderOpts.fetchMetrics;let s=W.renderOpts.pendingWaitUntil;s&&o.waitUntil&&(o.waitUntil(s),s=void 0);let y=W.renderOpts.collectedTags;if(!C)return await (0,d.sendResponse)($,K,a,W.renderOpts.pendingWaitUntil),null;{let e=await a.blob(),t=(0,f.toNodeOutgoingHttpHeaders)(a.headers);y&&(t[v.NEXT_CACHE_TAGS_HEADER]=y),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==W.renderOpts.collectedRevalidate&&!(W.renderOpts.collectedRevalidate>=v.INFINITE_CACHE)&&W.renderOpts.collectedRevalidate,o=void 0===W.renderOpts.collectedExpire||W.renderOpts.collectedExpire>=v.INFINITE_CACHE?void 0:W.renderOpts.collectedExpire;return{value:{kind:A.CachedRouteKind.APP_ROUTE,status:a.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:o}}}}catch(t){throw(null==r?void 0:r.isStale)&&await R.onRequestError(e,t,{routerKind:"App Router",routePath:m,routeType:"route",revalidateReason:(0,l.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:I})},_),t}},u=await R.handleResponse({req:e,nextConfig:E,cacheKey:k,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:O,isRoutePPREnabled:!1,isOnDemandRevalidate:I,revalidateOnlyGenerated:j,responseGenerator:y,waitUntil:o.waitUntil,isMinimalMode:p});if(!C)return null;if((null==u||null==(a=u.value)?void 0:a.kind)!==A.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(s=u.value)?void 0:s.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});p||t.setHeader("x-nextjs-cache",I?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),S&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let c=(0,f.fromNodeOutgoingHttpHeaders)(u.value.headers);return p&&C||c.delete(v.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||c.get("Cache-Control")||c.set("Cache-Control",(0,h.getCacheControlHeader)(u.cacheControl)),await (0,d.sendResponse)($,K,new Response(u.value.body,{headers:c,status:u.value.status||200})),null};H?await s(H):await G.withPropagatedContext(e.headers,()=>G.trace(c.BaseServerSpan.handleRequest,{spanName:`${B} ${m}`,kind:a.SpanKind.SERVER,attributes:{"http.method":B,"http.target":e.url}},s))}catch(t){if(t instanceof g.NoFallbackError||await R.onRequestError(e,t,{routerKind:"App Router",routePath:M,routeType:"route",revalidateReason:(0,l.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:I})}),C)throw t;return await (0,d.sendResponse)($,K,new Response(null,{status:500})),null}}e.s(["handler",()=>_,"patchFetch",()=>O,"routeModule",()=>R,"serverHooks",()=>S,"workAsyncStorage",()=>E,"workUnitAsyncStorage",()=>w],5501)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__6e72b9e6._.js.map