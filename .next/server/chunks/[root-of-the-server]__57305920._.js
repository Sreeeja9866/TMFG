module.exports=[93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},24361,(e,t,r)=>{t.exports=e.x("util",()=>require("util"))},14747,(e,t,r)=>{t.exports=e.x("path",()=>require("path"))},874,(e,t,r)=>{t.exports=e.x("buffer",()=>require("buffer"))},45706,(e,t,r)=>{t.exports=e.x("querystring",()=>require("querystring"))},29173,(e,t,r)=>{t.exports=e.x("@prisma/client",()=>require("@prisma/client"))},90679,e=>{"use strict";var t=e.i(29173);let r=globalThis.prisma??new t.PrismaClient;e.s(["prisma",0,r])},54799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},27699,(e,t,r)=>{t.exports=e.x("events",()=>require("events"))},21517,(e,t,r)=>{t.exports=e.x("http",()=>require("http"))},24836,(e,t,r)=>{t.exports=e.x("https",()=>require("https"))},33405,(e,t,r)=>{t.exports=e.x("child_process",()=>require("child_process"))},88947,(e,t,r)=>{t.exports=e.x("stream",()=>require("stream"))},92509,(e,t,r)=>{t.exports=e.x("url",()=>require("url"))},22734,(e,t,r)=>{t.exports=e.x("fs",()=>require("fs"))},49719,(e,t,r)=>{t.exports=e.x("assert",()=>require("assert"))},46786,(e,t,r)=>{t.exports=e.x("os",()=>require("os"))},6461,(e,t,r)=>{t.exports=e.x("zlib",()=>require("zlib"))},4446,(e,t,r)=>{t.exports=e.x("net",()=>require("net"))},55004,(e,t,r)=>{t.exports=e.x("tls",()=>require("tls"))},12841,(e,t,r)=>{"use strict";t.exports=TypeError},26167,(e,t,r)=>{"use strict";t.exports=Object},78075,(e,t,r)=>{"use strict";t.exports=Error},23767,(e,t,r)=>{"use strict";t.exports=EvalError},97799,(e,t,r)=>{"use strict";t.exports=RangeError},49670,(e,t,r)=>{"use strict";t.exports=ReferenceError},70365,(e,t,r)=>{"use strict";t.exports=SyntaxError},90665,(e,t,r)=>{"use strict";t.exports=URIError},85415,(e,t,r)=>{"use strict";t.exports=Math.abs},71016,(e,t,r)=>{"use strict";t.exports=Math.floor},74729,(e,t,r)=>{"use strict";t.exports=Math.max},32294,(e,t,r)=>{"use strict";t.exports=Math.min},93729,(e,t,r)=>{"use strict";t.exports=Math.pow},84640,(e,t,r)=>{"use strict";t.exports=Math.round},24798,(e,t,r)=>{"use strict";t.exports=Number.isNaN||function(e){return e!=e}},39591,(e,t,r)=>{"use strict";var o=e.r(24798);t.exports=function(e){return o(e)||0===e?e:e<0?-1:1}},52709,(e,t,r)=>{"use strict";t.exports=Object.getOwnPropertyDescriptor},5900,(e,t,r)=>{"use strict";var o=e.r(52709);if(o)try{o([],"length")}catch(e){o=null}t.exports=o},13664,(e,t,r)=>{"use strict";var o=Object.defineProperty||!1;if(o)try{o({},"a",{value:1})}catch(e){o=!1}t.exports=o},82419,(e,t,r)=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var o in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0}},42275,(e,t,r)=>{"use strict";var o="undefined"!=typeof Symbol&&Symbol,n=e.r(82419);t.exports=function(){return"function"==typeof o&&"function"==typeof Symbol&&"symbol"==typeof o("foo")&&"symbol"==typeof Symbol("bar")&&n()}},1655,(e,t,r)=>{"use strict";t.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},37057,(e,t,r)=>{"use strict";t.exports=e.r(26167).getPrototypeOf||null},29605,(e,t,r)=>{"use strict";var o=Object.prototype.toString,n=Math.max,a=function(e,t){for(var r=[],o=0;o<e.length;o+=1)r[o]=e[o];for(var n=0;n<t.length;n+=1)r[n+e.length]=t[n];return r},i=function(e,t){for(var r=[],o=t||0,n=0;o<e.length;o+=1,n+=1)r[n]=e[o];return r},s=function(e,t){for(var r="",o=0;o<e.length;o+=1)r+=e[o],o+1<e.length&&(r+=t);return r};t.exports=function(e){var t,r=this;if("function"!=typeof r||"[object Function]"!==o.apply(r))throw TypeError("Function.prototype.bind called on incompatible "+r);for(var p=i(arguments,1),u=n(0,r.length-p.length),y=[],l=0;l<u;l++)y[l]="$"+l;if(t=Function("binder","return function ("+s(y,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof t){var o=r.apply(this,a(p,arguments));return Object(o)===o?o:this}return r.apply(e,a(p,arguments))}),r.prototype){var c=function(){};c.prototype=r.prototype,t.prototype=new c,c.prototype=null}return t}},68278,(e,t,r)=>{"use strict";var o=e.r(29605);t.exports=Function.prototype.bind||o},96410,(e,t,r)=>{"use strict";t.exports=Function.prototype.call},37999,(e,t,r)=>{"use strict";t.exports=Function.prototype.apply},21246,(e,t,r)=>{"use strict";t.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},58420,(e,t,r)=>{"use strict";var o=e.r(68278),n=e.r(37999),a=e.r(96410);t.exports=e.r(21246)||o.call(a,n)},66227,(e,t,r)=>{"use strict";var o=e.r(68278),n=e.r(12841),a=e.r(96410),i=e.r(58420);t.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new n("a function is required");return i(o,a,e)}},8650,(e,t,r)=>{"use strict";var o,n=e.r(66227),a=e.r(5900);try{o=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var i=!!o&&a&&a(Object.prototype,"__proto__"),s=Object,p=s.getPrototypeOf;t.exports=i&&"function"==typeof i.get?n([i.get]):"function"==typeof p&&function(e){return p(null==e?e:s(e))}},50566,(e,t,r)=>{"use strict";var o=e.r(1655),n=e.r(37057),a=e.r(8650);t.exports=o?function(e){return o(e)}:n?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw TypeError("getProto: not an object");return n(e)}:a?function(e){return a(e)}:null},50916,(e,t,r)=>{"use strict";var o=Function.prototype.call,n=Object.prototype.hasOwnProperty;t.exports=e.r(68278).call(o,n)},35169,(e,t,r)=>{"use strict";var o=e.r(26167),n=e.r(78075),a=e.r(23767),i=e.r(97799),s=e.r(49670),p=e.r(70365),u=e.r(12841),y=e.r(90665),l=e.r(85415),c=e.r(71016),d=e.r(74729),f=e.r(32294),h=e.r(93729),m=e.r(84640),v=e.r(39591),g=Function,x=function(e){try{return g('"use strict"; return ('+e+").constructor;")()}catch(e){}},A=e.r(5900),b=e.r(13664),P=function(){throw new u},R=A?function(){try{return arguments.callee,P}catch(e){try{return A(arguments,"callee").get}catch(e){return P}}}():P,E=e.r(42275)(),w=e.r(50566),S=e.r(37057),O=e.r(1655),I=e.r(37999),j=e.r(96410),_={},F="undefined"!=typeof Uint8Array&&w?w(Uint8Array):void 0,N={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":E&&w?w([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":_,"%AsyncGenerator%":_,"%AsyncGeneratorFunction%":_,"%AsyncIteratorPrototype%":_,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?void 0:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?void 0:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":a,"%Float16Array%":"undefined"==typeof Float16Array?void 0:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":g,"%GeneratorFunction%":_,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":E&&w?w(w([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&E&&w?w(new Map()[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":o,"%Object.getOwnPropertyDescriptor%":A,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&E&&w?w(new Set()[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":E&&w?w(""[Symbol.iterator]()):void 0,"%Symbol%":E?Symbol:void 0,"%SyntaxError%":p,"%ThrowTypeError%":R,"%TypedArray%":F,"%TypeError%":u,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":y,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%Function.prototype.call%":j,"%Function.prototype.apply%":I,"%Object.defineProperty%":b,"%Object.getPrototypeOf%":S,"%Math.abs%":l,"%Math.floor%":c,"%Math.max%":d,"%Math.min%":f,"%Math.pow%":h,"%Math.round%":m,"%Math.sign%":v,"%Reflect.getPrototypeOf%":O};if(w)try{null.error}catch(e){var U=w(w(e));N["%Error.prototype%"]=U}var M=function e(t){var r;if("%AsyncFunction%"===t)r=x("async function () {}");else if("%GeneratorFunction%"===t)r=x("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=x("async function* () {}");else if("%AsyncGenerator%"===t){var o=e("%AsyncGeneratorFunction%");o&&(r=o.prototype)}else if("%AsyncIteratorPrototype%"===t){var n=e("%AsyncGenerator%");n&&w&&(r=w(n.prototype))}return N[t]=r,r},k={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},C=e.r(68278),T=e.r(50916),q=C.call(j,Array.prototype.concat),D=C.call(I,Array.prototype.splice),B=C.call(j,String.prototype.replace),G=C.call(j,String.prototype.slice),$=C.call(j,RegExp.prototype.exec),H=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,W=/\\(\\)?/g,K=function(e){var t=G(e,0,1),r=G(e,-1);if("%"===t&&"%"!==r)throw new p("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new p("invalid intrinsic syntax, expected opening `%`");var o=[];return B(e,H,function(e,t,r,n){o[o.length]=r?B(n,W,"$1"):t||e}),o},V=function(e,t){var r,o=e;if(T(k,o)&&(o="%"+(r=k[o])[0]+"%"),T(N,o)){var n=N[o];if(n===_&&(n=M(o)),void 0===n&&!t)throw new u("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:o,value:n}}throw new p("intrinsic "+e+" does not exist!")};t.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new u('"allowMissing" argument must be a boolean');if(null===$(/^%?[^%]*%?$/,e))throw new p("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=K(e),o=r.length>0?r[0]:"",n=V("%"+o+"%",t),a=n.name,i=n.value,s=!1,y=n.alias;y&&(o=y[0],D(r,q([0,1],y)));for(var l=1,c=!0;l<r.length;l+=1){var d=r[l],f=G(d,0,1),h=G(d,-1);if(('"'===f||"'"===f||"`"===f||'"'===h||"'"===h||"`"===h)&&f!==h)throw new p("property names with quotes must have matching quotes");if("constructor"!==d&&c||(s=!0),o+="."+d,T(N,a="%"+o+"%"))i=N[a];else if(null!=i){if(!(d in i)){if(!t)throw new u("base intrinsic for "+e+" exists, but the property is not available.");return}if(A&&l+1>=r.length){var m=A(i,d);i=(c=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:i[d]}else c=T(i,d),i=i[d];c&&!s&&(N[a]=i)}}return i}},7262,e=>{"use strict";var t=e.i(9856),r=e.i(4298),o=e.i(66252),n=e.i(82116),a=e.i(92397),i=e.i(83134),s=e.i(85472),p=e.i(97106),u=e.i(8459),y=e.i(25846),l=e.i(89678),c=e.i(45397),d=e.i(31928),f=e.i(85116),h=e.i(65686),m=e.i(70656),v=e.i(93695);e.i(42613);var g=e.i(91967),x=e.i(63629),A=e.i(99838),b=e.i(90679),P=e.i(61148);async function R(e){let t,r=await e.text(),o=e.headers.get("stripe-signature");if(!o)return x.NextResponse.json({error:"No signature found"},{status:400});try{t=A.stripe.webhooks.constructEvent(r,o,process.env.STRIPE_WEBHOOK_SECRET||"")}catch(e){return console.error("Webhook signature verification failed:",e.message),x.NextResponse.json({error:`Webhook Error: ${e.message}`},{status:400})}switch(t.type){case"checkout.session.completed":{let e=t.data.object;try{let t=await b.prisma.donation.create({data:{amount:(e.amount_total||0)/100,currency:e.currency||"usd",donorName:e.metadata?.donorName||"Anonymous",donorEmail:e.customer_email||e.metadata?.donorEmail||"",stripePaymentId:e.payment_intent,status:"succeeded",message:e.metadata?.message||null}});if(e.customer_email){let r=(0,P.getDonationThankYouEmail)(e.metadata?.donorName||"Friend",t.amount);await (0,P.sendEmail)({to:e.customer_email,subject:r.subject,text:r.text,html:r.html})}process.env.ADMIN_EMAIL&&await (0,P.sendEmail)({to:process.env.ADMIN_EMAIL,subject:"New Donation Received",text:`New donation:

Amount: $${t.amount}
Donor: ${t.donorName}
Email: ${t.donorEmail}
Message: ${t.message||"N/A"}`}),console.log("Donation recorded:",t.id)}catch(e){console.error("Error processing donation:",e)}break}case"payment_intent.payment_failed":console.error("Payment failed:",t.data.object.id);break;default:console.log(`Unhandled event type: ${t.type}`)}return x.NextResponse.json({received:!0},{status:200})}e.s(["POST",()=>R],31080);var E=e.i(31080);let w=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/webhooks/stripe/route",pathname:"/api/webhooks/stripe",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/TMFG/src/app/api/webhooks/stripe/route.ts",nextConfigOutput:"",userland:E}),{workAsyncStorage:S,workUnitAsyncStorage:O,serverHooks:I}=w;function j(){return(0,o.patchFetch)({workAsyncStorage:S,workUnitAsyncStorage:O})}async function _(e,t,o){w.isDev&&(0,n.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let x="/api/webhooks/stripe/route";x=x.replace(/\/index$/,"")||"/";let A=await w.prepare(e,t,{srcPage:x,multiZoneDraftMode:!1});if(!A)return t.statusCode=400,t.end("Bad Request"),null==o.waitUntil||o.waitUntil.call(o,Promise.resolve()),null;let{buildId:b,params:P,nextConfig:R,parsedUrl:E,isDraftMode:S,prerenderManifest:O,routerServerContext:I,isOnDemandRevalidate:j,revalidateOnlyGenerated:_,resolvedPathname:F,clientReferenceManifest:N,serverActionsManifest:U}=A,M=(0,p.normalizeAppPath)(x),k=!!(O.dynamicRoutes[M]||O.routes[F]),C=async()=>((null==I?void 0:I.render404)?await I.render404(e,t,E,!1):t.end("This page could not be found"),null);if(k&&!S){let e=!!O.routes[F],t=O.dynamicRoutes[M];if(t&&!1===t.fallback&&!e){if(R.experimental.adapterPath)return await C();throw new v.NoFallbackError}}let T=null;!k||w.isDev||S||(T="/index"===(T=F)?"/":T);let q=!0===w.isDev||!k,D=k&&!q;U&&N&&(0,i.setReferenceManifestsSingleton)({page:x,clientReferenceManifest:N,serverActionsManifest:U,serverModuleMap:(0,s.createServerModuleMap)({serverActionsManifest:U})});let B=e.method||"GET",G=(0,a.getTracer)(),$=G.getActiveScopeSpan(),H={params:P,prerenderManifest:O,renderOpts:{experimental:{authInterrupts:!!R.experimental.authInterrupts},cacheComponents:!!R.cacheComponents,supportsDynamicResponse:q,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:R.cacheLife,waitUntil:o.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,o)=>w.onRequestError(e,t,o,I)},sharedContext:{buildId:b}},W=new u.NodeNextRequest(e),K=new u.NodeNextResponse(t),V=y.NextRequestAdapter.fromNodeNextRequest(W,(0,y.signalFromNodeResponse)(t));try{let i=async e=>w.handle(V,H).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=G.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==l.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=r.get("next.route");if(o){let t=`${B} ${o}`;e.setAttributes({"next.route":o,"http.route":o,"next.span_name":t}),e.updateName(t)}else e.updateName(`${B} ${x}`)}),s=!!(0,n.getRequestMeta)(e,"minimalMode"),p=async n=>{var a,p;let u=async({previousCacheEntry:r})=>{try{if(!s&&j&&_&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let a=await i(n);e.fetchMetrics=H.renderOpts.fetchMetrics;let p=H.renderOpts.pendingWaitUntil;p&&o.waitUntil&&(o.waitUntil(p),p=void 0);let u=H.renderOpts.collectedTags;if(!k)return await (0,d.sendResponse)(W,K,a,H.renderOpts.pendingWaitUntil),null;{let e=await a.blob(),t=(0,f.toNodeOutgoingHttpHeaders)(a.headers);u&&(t[m.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==H.renderOpts.collectedRevalidate&&!(H.renderOpts.collectedRevalidate>=m.INFINITE_CACHE)&&H.renderOpts.collectedRevalidate,o=void 0===H.renderOpts.collectedExpire||H.renderOpts.collectedExpire>=m.INFINITE_CACHE?void 0:H.renderOpts.collectedExpire;return{value:{kind:g.CachedRouteKind.APP_ROUTE,status:a.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:o}}}}catch(t){throw(null==r?void 0:r.isStale)&&await w.onRequestError(e,t,{routerKind:"App Router",routePath:x,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:j})},I),t}},y=await w.handleResponse({req:e,nextConfig:R,cacheKey:T,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:O,isRoutePPREnabled:!1,isOnDemandRevalidate:j,revalidateOnlyGenerated:_,responseGenerator:u,waitUntil:o.waitUntil,isMinimalMode:s});if(!k)return null;if((null==y||null==(a=y.value)?void 0:a.kind)!==g.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==y||null==(p=y.value)?void 0:p.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",j?"REVALIDATED":y.isMiss?"MISS":y.isStale?"STALE":"HIT"),S&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let l=(0,f.fromNodeOutgoingHttpHeaders)(y.value.headers);return s&&k||l.delete(m.NEXT_CACHE_TAGS_HEADER),!y.cacheControl||t.getHeader("Cache-Control")||l.get("Cache-Control")||l.set("Cache-Control",(0,h.getCacheControlHeader)(y.cacheControl)),await (0,d.sendResponse)(W,K,new Response(y.value.body,{headers:l,status:y.value.status||200})),null};$?await p($):await G.withPropagatedContext(e.headers,()=>G.trace(l.BaseServerSpan.handleRequest,{spanName:`${B} ${x}`,kind:a.SpanKind.SERVER,attributes:{"http.method":B,"http.target":e.url}},p))}catch(t){if(t instanceof v.NoFallbackError||await w.onRequestError(e,t,{routerKind:"App Router",routePath:M,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:j})}),k)throw t;return await (0,d.sendResponse)(W,K,new Response(null,{status:500})),null}}e.s(["handler",()=>_,"patchFetch",()=>j,"routeModule",()=>w,"serverHooks",()=>I,"workAsyncStorage",()=>S,"workUnitAsyncStorage",()=>O],7262)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__57305920._.js.map