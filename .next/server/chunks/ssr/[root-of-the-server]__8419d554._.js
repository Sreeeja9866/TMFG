module.exports=[37216,(a,b,c)=>{"use strict";b.exports=a.r(58046).vendored["react-ssr"].ReactDOM},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},18771,(a,b,c)=>{"use strict";b.exports=a.r(58046).vendored.contexts.HooksClientContext},22898,(a,b,c)=>{"use strict";b.exports=a.r(58046).vendored.contexts.ServerInsertedHtml},88028,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(43110),g=a.r(30406),h=a.r(32654),i=f._(a.r(23815));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},39179,(a,b,c)=>{b.exports=a.r(88028)},13819,a=>{"use strict";var b=a.i(34282),c=a.i(51950),d=a.i(33096),e=a.i(76048),f=a.i(39179);function g({params:a}){let g=(0,d.useRouter)(),{id:h}=(0,c.use)(a),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)({title:"",slug:"",content:"",excerpt:"",author:"",category:"",tags:"",image:"",published:!1});(0,c.useEffect)(()=>{s()},[h]);let s=async()=>{try{let a=await fetch(`/api/admin/blog/${h}`);if(!a.ok)throw Error("Failed to fetch blog post");let b=(await a.json()).post;r({title:b.title||"",slug:b.slug||"",content:b.content||"",excerpt:b.excerpt||"",author:b.author||"",category:b.category||"",tags:Array.isArray(b.tags)?b.tags.join(", "):"",image:b.image||"",published:b.published||!1}),b.image&&p(b.image)}catch(a){console.error("Fetch error:",a),alert("Failed to load blog post"),g.push("/admin/blog")}},t=a=>{let{name:b,value:c,type:d}=a.target;if("checkbox"===d){let c=a.target.checked;r(a=>({...a,[b]:c}))}else r(a=>({...a,[b]:c}))},u=async a=>{let b=a.target.files?.[0];if(b){if(!b.type.startsWith("image/"))return void alert("Please select an image file");if(b.size>5242880)return void alert("File size must be less than 5MB");l(!0);try{let a=new FormData;a.append("file",b),a.append("type","blog");let c=await fetch("/api/admin/upload",{method:"POST",body:a});if(!c.ok){let a=await c.json();throw Error(a.error||"Upload failed")}let d=await c.json();r(a=>({...a,image:d.path})),p(d.path),alert("Image uploaded successfully!")}catch(a){console.error("Upload error:",a),alert(a instanceof Error?a.message:"Failed to upload image")}finally{l(!1)}}},v=async a=>{a.preventDefault(),j(!0);try{let a=q.tags.split(",").map(a=>a.trim()).filter(a=>a.length>0),b=await fetch(`/api/admin/blog/${h}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({...q,tags:a})});if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to update blog post")}alert("Blog post updated successfully!"),g.push("/admin/blog")}catch(a){console.error("Update error:",a),alert(a instanceof Error?a.message:"Failed to update blog post")}finally{j(!1)}},w=async()=>{if(confirm("Are you sure you want to delete this blog post? This action cannot be undone.")){n(!0);try{let a=await fetch(`/api/admin/blog/${h}`,{method:"DELETE"});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to delete blog post")}alert("Blog post deleted successfully!"),g.push("/admin/blog")}catch(a){console.error("Delete error:",a),alert(a instanceof Error?a.message:"Failed to delete blog post"),n(!1)}}};return(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)(e.default,{href:"/admin/blog",className:"text-primary hover:underline mb-4 inline-block",children:"â† Back to Blog"}),(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Blog Post"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"Update blog post details"})]}),(0,b.jsxs)("form",{onSubmit:v,className:"bg-white rounded-lg shadow p-8 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"title",className:"block text-sm font-semibold mb-2",children:["Title ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",id:"title",name:"title",value:q.title,onChange:t,required:!0,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"slug",className:"block text-sm font-semibold mb-2",children:["URL Slug ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",id:"slug",name:"slug",value:q.slug,onChange:t,required:!0,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Used in URL. Be careful changing this as it will break existing links."})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"author",className:"block text-sm font-semibold mb-2",children:["Author ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",id:"author",name:"author",value:q.author,onChange:t,required:!0,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"category",className:"block text-sm font-semibold mb-2",children:"Category"}),(0,b.jsxs)("select",{id:"category",name:"category",value:q.category,onChange:t,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary",children:[(0,b.jsx)("option",{value:"",children:"Select category"}),(0,b.jsx)("option",{value:"Gardening Tips",children:"Gardening Tips"}),(0,b.jsx)("option",{value:"Seasonal Guides",children:"Seasonal Guides"}),(0,b.jsx)("option",{value:"Workshops & Events",children:"Workshops & Events"}),(0,b.jsx)("option",{value:"Community Stories",children:"Community Stories"}),(0,b.jsx)("option",{value:"Sustainable Living",children:"Sustainable Living"}),(0,b.jsx)("option",{value:"News & Updates",children:"News & Updates"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"excerpt",className:"block text-sm font-semibold mb-2",children:"Excerpt (Summary)"}),(0,b.jsx)("textarea",{id:"excerpt",name:"excerpt",value:q.excerpt,onChange:t,rows:3,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"content",className:"block text-sm font-semibold mb-2",children:["Content (Markdown supported) ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("textarea",{id:"content",name:"content",value:q.content,onChange:t,required:!0,rows:15,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary font-mono text-sm"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Supports Markdown: **bold**, *italic*, [link](url), # Headings, etc."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"tags",className:"block text-sm font-semibold mb-2",children:"Tags"}),(0,b.jsx)("input",{type:"text",id:"tags",name:"tags",value:q.tags,onChange:t,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary",placeholder:"e.g., gardening, spring, tips (comma separated)"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Separate tags with commas"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"image",className:"block text-sm font-semibold mb-2",children:"Featured Image"}),(0,b.jsx)("input",{type:"file",id:"image",accept:"image/*",onChange:u,disabled:k,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary"}),k&&(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Uploading image..."}),o&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("p",{className:"text-sm font-semibold mb-2",children:"Current Image:"}),(0,b.jsx)("div",{className:"relative w-full h-64 rounded-lg overflow-hidden",children:(0,b.jsx)(f.default,{src:o,alt:"Preview",fill:!0,className:"object-cover"})})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg",children:[(0,b.jsx)("input",{type:"checkbox",id:"published",name:"published",checked:q.published,onChange:t,className:"w-5 h-5 text-primary focus:ring-2 focus:ring-primary"}),(0,b.jsx)("label",{htmlFor:"published",className:"text-sm font-semibold",children:"Published (visible on website)"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t",children:[(0,b.jsx)("button",{type:"button",onClick:w,disabled:m||i,className:"bg-red-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-700 transition-colors disabled:opacity-50",children:m?"Deleting...":"Delete Post"}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)(e.default,{href:"/admin/blog",className:"bg-gray-200 text-gray-700 px-8 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:i||k,className:"bg-primary text-white px-8 py-3 rounded-lg font-semibold hover:bg-opacity-90 transition-colors disabled:opacity-50",children:i?"Saving...":"Save Changes"})]})]})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__8419d554._.js.map